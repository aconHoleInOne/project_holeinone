{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\awd63\\\\Downloads\\\\AIhomeTraining_web-master\\\\AIhomeTraining_web-master\\\\Listener\\\\frontend\\\\src\\\\containers\\\\exercise\\\\ExerciseContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Test from '../../components/exercises/Test';\nimport styled from 'styled-components';\nimport Button from '../../components/common/Button';\nimport palette from '../../lib/style/palette';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Check from '../../components/exercises/Check';\nimport First from './First';\nimport { writeExercise } from '../../modules/exercise';\nimport { updateTotalTime, updateLevel } from '../../modules/auth';\nimport './ExerciseContainer.css'; //import squat from './image/squat';\n\nconst Wrapper = styled.div`\n  text-align: center;\n`;\n_c = Wrapper;\nconst ButtonWrapper = styled.div`\n  position: flex;\n  bottom: 0;\n  margin-top: 50px;\n  text-align: center;\n  @media (max-width: 768px) {\n    margin-top: 100px;\n  }\n`;\n_c2 = ButtonWrapper;\nconst StyledButton2 = styled(Button)`\n  background: ${palette.gray[7]};\n  &:hover {\n    background: ${palette.gray[5]};\n  }\n`;\n_c3 = StyledButton2;\nconst StyledButton = styled(Button)`\n  background: ${palette.gray[7]};\n  &:hover {\n    background: ${palette.gray[5]};\n  }\n  position: absolute;\n  bottom: -3%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n_c4 = StyledButton;\nconst Spacer = styled.div`\n  height: 3.5rem;\n`;\n_c5 = Spacer;\nconst Text = styled.div`\n  display: block;\n  width: 100%;\n  text-align: center;\n`;\nconst Ec = styled.div`\nposition: relative;\n}\n`;\n_c6 = Ec;\nlet analysis = [];\nlet cntArr = [];\n\nconst getData = (data, countArr) => {\n  analysis = data;\n  cntArr = countArr;\n}; //Test.js 에서 analysis 객체 받아오는 함수\n\n\nlet squatCount = 15;\nlet lungeCount = 15;\nlet shoulderCount = 15;\n\nconst setSquatCount = squat => {\n  if (squat === '') squatCount = 15;else if (squat < 0) squatCount = parseInt(-squat);else squatCount = parseInt(squat);\n};\n\nconst setLungeCount = lunge => {\n  if (lunge === '') lungeCount = 15;else if (lunge < 0) lungeCount = parseInt(-lunge);else lungeCount = parseInt(lunge);\n};\n\nconst setShoulderCount = shoulder => {\n  if (shoulder === '') shoulderCount = 15;else if (shoulder < 0) shoulderCount = parseInt(-shoulder);else shoulderCount = parseInt(shoulder);\n};\n\nconst ExerciseContainer = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    user\n  } = useSelector(({\n    user\n  }) => ({\n    user: user.user\n  }));\n  const [showResults, setShowResults] = useState(false);\n  const [first, setFirst] = useState(true);\n  var total = 0;\n  var seconds = 0;\n  var minutes = 0;\n  var time;\n  var msec = 0;\n  var mtime;\n\n  const videoOff = () => {\n    if (showResults === true) {\n      const video = document.querySelector('video');\n      const mediaStream = video.srcObject;\n      const tracks = mediaStream.getTracks();\n      tracks[0].stop();\n      tracks.forEach(track => track.stop());\n    }\n\n    setShowResults(false);\n    user.s = total;\n    total = total / 60;\n    user.t = Number(total.toFixed(2));\n    const username = user.username;\n    const totaltime = Number((user.t + user.totalTime).toFixed(2));\n    let newlevel = '🌱';\n    dispatch(writeExercise({\n      title: user.t,\n      username: username\n    }));\n    if (totaltime < 420) newlevel = '🌱';else if (totaltime >= 420 && totaltime < 840) newlevel = '🐣';else if (totaltime >= 840 && totaltime < 1260) newlevel = '👶';else if (totaltime >= 1260 && totaltime < 1680) newlevel = '🏋';else if (totaltime >= 1680 && totaltime < 2100) newlevel = '💪';else if (totaltime >= 2100 && totaltime < 2520) newlevel = '👿';else newlevel = '🦍';\n    dispatch(updateTotalTime({\n      username: username,\n      totalTime: totaltime,\n      level: newlevel\n    }));\n  };\n\n  const videoOn = () => {\n    setShowResults(true);\n    setFirst(false);\n  };\n\n  const linkTo = () => {\n    document.location.href = '/main';\n  };\n\n  useEffect(() => {\n    if (showResults) {\n      setTimeout(function () {\n        document.getElementById('minutes_10').innerHTML = 0;\n        document.getElementById('minutes_1').innerHTML = 0;\n        document.getElementById('seconds_10').innerHTML = 0;\n        document.getElementById('seconds_1').innerHTML = 0;\n        time = setInterval(() => {\n          total++;\n          minutes = parseInt(total / 60);\n          document.getElementById('minutes_10').innerHTML = parseInt(minutes / 10);\n          document.getElementById('minutes_1').innerHTML = minutes % 10;\n          seconds = parseInt(total % 60);\n          document.getElementById('seconds_10').innerHTML = parseInt(seconds / 10);\n          document.getElementById('seconds_1').innerHTML = seconds % 10;\n        }, 1000);\n      }, 5000);\n    }\n\n    return () => clearInterval(time);\n  });\n  useEffect(() => {\n    if (showResults) {\n      setTimeout(function () {\n        mtime = setInterval(() => {\n          msec++;\n          if (msec === 10) msec = 0;\n          document.getElementById('msec').innerHTML = msec;\n        }, 100);\n      }, 5000);\n    }\n\n    return () => clearInterval(mtime);\n  });\n  useEffect(() => {\n    if (showResults === true) {\n      setTimeout(function () {\n        document.getElementById('ready').innerHTML = 'Ready?';\n      }, 1500);\n      setTimeout(function () {\n        document.getElementById('ready').innerHTML = 'Start!';\n      }, 3500);\n      setTimeout(function () {\n        document.getElementById('ready').style.visibility = 'hidden';\n        document.getElementById('endbutton').style.visibility = 'visible';\n      }, 5000);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Ec, {\n      children: [first && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(First, {\n          setSquatCount: setSquatCount,\n          setLungeCount: setLungeCount,\n          setShoulderCount: setShoulderCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(StyledButton, {\n          onClick: videoOn,\n          children: \"\\uC2DC\\uC791\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this), showResults && /*#__PURE__*/_jsxDEV(Wrapper, {\n        children: [/*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"watch\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"strap_top\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"watch_body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"minutes_10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"minutes_1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"seconds_10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"seconds_1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"msec\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"ready\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"strap_bottom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Test, {\n          getData: getData,\n          squatCount: squatCount,\n          lungeCount: lungeCount,\n          shoulderCount: shoulderCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"endbutton\",\n          children: /*#__PURE__*/_jsxDEV(StyledButton, {\n            onClick: videoOff,\n            children: \"\\uC885\\uB8CC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this), !first && !showResults && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Check, {\n          analysis: analysis,\n          cntArr: cntArr,\n          style: {\n            height: 'auto'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ButtonWrapper, {\n          children: [/*#__PURE__*/_jsxDEV(StyledButton2, {\n            onClick: videoOn,\n            children: \"\\uB2E4\\uC2DC\\uC2DC\\uC791\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this), ' ', /*#__PURE__*/_jsxDEV(StyledButton2, {\n            onClick: linkTo,\n            children: \"\\uB05D\\uB0B4\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(ExerciseContainer, \"pSLZXBU3jGAoeXTXitABbQ+jQAM=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c7 = ExerciseContainer;\nexport default ExerciseContainer;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"ButtonWrapper\");\n$RefreshReg$(_c3, \"StyledButton2\");\n$RefreshReg$(_c4, \"StyledButton\");\n$RefreshReg$(_c5, \"Spacer\");\n$RefreshReg$(_c6, \"Ec\");\n$RefreshReg$(_c7, \"ExerciseContainer\");","map":{"version":3,"sources":["C:/Users/awd63/Downloads/AIhomeTraining_web-master/AIhomeTraining_web-master/Listener/frontend/src/containers/exercise/ExerciseContainer.js"],"names":["React","useState","useEffect","Test","styled","Button","palette","useSelector","useDispatch","Check","First","writeExercise","updateTotalTime","updateLevel","Wrapper","div","ButtonWrapper","StyledButton2","gray","StyledButton","Spacer","Text","Ec","analysis","cntArr","getData","data","countArr","squatCount","lungeCount","shoulderCount","setSquatCount","squat","parseInt","setLungeCount","lunge","setShoulderCount","shoulder","ExerciseContainer","dispatch","user","showResults","setShowResults","first","setFirst","total","seconds","minutes","time","msec","mtime","videoOff","video","document","querySelector","mediaStream","srcObject","tracks","getTracks","stop","forEach","track","s","t","Number","toFixed","username","totaltime","totalTime","newlevel","title","level","videoOn","linkTo","location","href","setTimeout","getElementById","innerHTML","setInterval","clearInterval","style","visibility","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Test from '../../components/exercises/Test';\nimport styled from 'styled-components';\nimport Button from '../../components/common/Button';\nimport palette from '../../lib/style/palette';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Check from '../../components/exercises/Check';\nimport First from './First';\nimport { writeExercise } from '../../modules/exercise';\nimport { updateTotalTime, updateLevel } from '../../modules/auth';\nimport './ExerciseContainer.css';\n\n//import squat from './image/squat';\nconst Wrapper = styled.div`\n  text-align: center;\n`;\nconst ButtonWrapper = styled.div`\n  position: flex;\n  bottom: 0;\n  margin-top: 50px;\n  text-align: center;\n  @media (max-width: 768px) {\n    margin-top: 100px;\n  }\n`;\n\nconst StyledButton2 = styled(Button)`\n  background: ${palette.gray[7]};\n  &:hover {\n    background: ${palette.gray[5]};\n  }\n`;\nconst StyledButton = styled(Button)`\n  background: ${palette.gray[7]};\n  &:hover {\n    background: ${palette.gray[5]};\n  }\n  position: absolute;\n  bottom: -3%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\nconst Spacer = styled.div`\n  height: 3.5rem;\n`;\n\nconst Text = styled.div`\n  display: block;\n  width: 100%;\n  text-align: center;\n`;\n\nconst Ec = styled.div`\nposition: relative;\n}\n`;\n\nlet analysis = [];\nlet cntArr = [];\nconst getData = (data, countArr) => {\n  analysis = data;\n  cntArr = countArr;\n}; //Test.js 에서 analysis 객체 받아오는 함수\nlet squatCount = 15;\nlet lungeCount = 15;\nlet shoulderCount = 15;\nconst setSquatCount = (squat) => {\n  if (squat === '') squatCount = 15;\n  else if (squat < 0) squatCount = parseInt(-squat);\n  else squatCount = parseInt(squat);\n};\nconst setLungeCount = (lunge) => {\n  if (lunge === '') lungeCount = 15;\n  else if (lunge < 0) lungeCount = parseInt(-lunge);\n  else lungeCount = parseInt(lunge);\n};\nconst setShoulderCount = (shoulder) => {\n  if (shoulder === '') shoulderCount = 15;\n  else if (shoulder < 0) shoulderCount = parseInt(-shoulder);\n  else shoulderCount = parseInt(shoulder);\n};\n\nconst ExerciseContainer = () => {\n  const dispatch = useDispatch();\n  const { user } = useSelector(({ user }) => ({\n    user: user.user,\n  }));\n  const [showResults, setShowResults] = useState(false);\n  const [first, setFirst] = useState(true);\n  var total = 0;\n  var seconds = 0;\n  var minutes = 0;\n  var time;\n  var msec = 0;\n  var mtime;\n\n  const videoOff = () => {\n    if (showResults === true) {\n      const video = document.querySelector('video');\n      const mediaStream = video.srcObject;\n      const tracks = mediaStream.getTracks();\n      tracks[0].stop();\n      tracks.forEach((track) => track.stop());\n    }\n    setShowResults(false);\n    user.s = total;\n    total = total / 60;\n    user.t = Number(total.toFixed(2));\n    const username = user.username;\n    const totaltime = Number((user.t + user.totalTime).toFixed(2));\n    let newlevel = '🌱';\n    dispatch(writeExercise({ title: user.t, username: username }));\n\n    if (totaltime < 420) newlevel = '🌱';\n    else if (totaltime >= 420 && totaltime < 840) newlevel = '🐣';\n    else if (totaltime >= 840 && totaltime < 1260) newlevel = '👶';\n    else if (totaltime >= 1260 && totaltime < 1680) newlevel = '🏋';\n    else if (totaltime >= 1680 && totaltime < 2100) newlevel = '💪';\n    else if (totaltime >= 2100 && totaltime < 2520) newlevel = '👿';\n    else newlevel = '🦍';\n\n    dispatch(\n      updateTotalTime({\n        username: username,\n        totalTime: totaltime,\n        level: newlevel,\n      }),\n    );\n  };\n  const videoOn = () => {\n    setShowResults(true);\n    setFirst(false);\n  };\n  const linkTo = () => {\n    document.location.href = '/main';\n  };\n\n  useEffect(() => {\n    if (showResults) {\n      setTimeout(function () {\n        document.getElementById('minutes_10').innerHTML = 0;\n        document.getElementById('minutes_1').innerHTML = 0;\n        document.getElementById('seconds_10').innerHTML = 0;\n        document.getElementById('seconds_1').innerHTML = 0;\n        time = setInterval(() => {\n          total++;\n          minutes = parseInt(total / 60);\n          document.getElementById('minutes_10').innerHTML = parseInt(\n            minutes / 10,\n          );\n          document.getElementById('minutes_1').innerHTML = minutes % 10;\n          seconds = parseInt(total % 60);\n          document.getElementById('seconds_10').innerHTML = parseInt(\n            seconds / 10,\n          );\n          document.getElementById('seconds_1').innerHTML = seconds % 10;\n        }, 1000);\n      }, 5000);\n    }\n    return () => clearInterval(time);\n  });\n\n  useEffect(() => {\n    if (showResults) {\n      setTimeout(function () {\n        mtime = setInterval(() => {\n          msec++;\n          if (msec === 10) msec = 0;\n          document.getElementById('msec').innerHTML = msec;\n        }, 100);\n      }, 5000);\n    }\n    return () => clearInterval(mtime);\n  });\n\n  useEffect(() => {\n    if (showResults === true) {\n      setTimeout(function () {\n        document.getElementById('ready').innerHTML = 'Ready?';\n      }, 1500);\n      setTimeout(function () {\n        document.getElementById('ready').innerHTML = 'Start!';\n      }, 3500);\n      setTimeout(function () {\n        document.getElementById('ready').style.visibility = 'hidden';\n        document.getElementById('endbutton').style.visibility = 'visible';\n      }, 5000);\n    }\n  });\n\n  return (\n    <>\n      <Ec>\n        {first && (\n          <div>\n            <First\n              setSquatCount={setSquatCount}\n              setLungeCount={setLungeCount}\n              setShoulderCount={setShoulderCount}\n            />\n            <Spacer />\n            <StyledButton onClick={videoOn}>시작</StyledButton>\n          </div>\n        )}\n        {showResults && (\n          <Wrapper>\n            <Spacer />\n            <div id=\"watch\">\n              <div id=\"button\"></div>\n              <div id=\"strap_top\"></div>\n              <div id=\"watch_body\">\n                <div id=\"minutes_10\"></div>\n                <div id=\"minutes_1\"></div>\n                <div id=\"seconds_10\"></div>\n                <div id=\"seconds_1\"></div>\n                <div id=\"msec\"></div>\n                <div id=\"ready\"></div>\n              </div>\n              <div id=\"strap_bottom\"></div>\n            </div>\n            <Test\n              getData={getData}\n              squatCount={squatCount}\n              lungeCount={lungeCount}\n              shoulderCount={shoulderCount}\n            />\n            <Spacer />\n            <div id=\"endbutton\">\n              <StyledButton onClick={videoOff}>종료</StyledButton>\n            </div>\n          </Wrapper>\n        )}\n        {!first && !showResults && (\n          <div>\n            <Check\n              analysis={analysis}\n              cntArr={cntArr}\n              style={{ height: 'auto' }}\n            />\n            <ButtonWrapper>\n              <StyledButton2 onClick={videoOn}>다시시작</StyledButton2>{' '}\n              <StyledButton2 onClick={linkTo}>끝내기</StyledButton2>\n            </ButtonWrapper>\n          </div>\n        )}\n      </Ec>\n    </>\n  );\n};\nexport default ExerciseContainer;\n"]},"metadata":{},"sourceType":"module"}